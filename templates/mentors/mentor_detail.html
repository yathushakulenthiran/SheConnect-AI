{% extends "base.html" %}
{% block title %}{{ mentor.name }} - Mentor Profile{% endblock %}
{% block content %}
<div class="container mt-5">
  <div class="row">
    <div class="col-md-4 text-center">
      {% if mentor.photo %}
        <img src="{{ mentor.photo.url }}" alt="{{ mentor.name }}" class="img-thumbnail rounded-circle mb-3" style="width:160px;height:160px;object-fit:cover;">
      {% else %}
        <div class="rounded-circle bg-primary d-inline-flex align-items-center justify-content-center mb-3" style="width:160px;height:160px;">
          <i class="fas fa-user text-white" style="font-size:3rem;"></i>
        </div>
      {% endif %}
      <h3 class="text-white">{{ mentor.name }}</h3>
      <p class="text-white-50">{{ mentor.expertise }}</p>
      <div>
        <span class="badge bg-{% if mentor.availability_status == 'available' %}success{% elif mentor.availability_status == 'busy' %}warning{% else %}secondary{% endif %}">{{ mentor.availability_status|title }}</span>
      </div>
      <div class="mt-3">
        <span class="text-warning">
          <i class="fas fa-star"></i> {{ mentor.average_rating|floatformat:1 }} ({{ mentor.rating_count }} ratings)
        </span>
      </div>
      
      <!-- Connection Status and Actions -->
      {% if user.is_authenticated %}
        {% if user.mentee_profile %}
          {% if connection_status == 'pending' %}
            <div class="mt-3">
              <span class="badge bg-warning">Connection Pending</span>
            </div>
          {% elif connection_status == 'accepted' %}
            <div class="mt-3">
              <span class="badge bg-success">Connected</span>
            </div>
          {% elif connection_status == 'rejected' %}
            <div class="mt-3">
              <span class="badge bg-danger">Connection Rejected</span>
            </div>
          {% else %}
            <div class="mt-3">
              <a href="{% url 'mentees:send_connection' mentor.id %}" class="btn btn-primary">
                <i class="fas fa-handshake me-1"></i>Connect
              </a>
            </div>
          {% endif %}
        {% endif %}
      {% endif %}
      
      {% if mentor.linkedin_profile %}
        <div class="mt-3">
          <a href="{{ mentor.linkedin_profile }}" target="_blank" class="btn btn-outline-light btn-sm"><i class="fab fa-linkedin me-1"></i>LinkedIn</a>
        </div>
      {% endif %}
    </div>
    <div class="col-md-8">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">About</h5>
          <p class="card-text">{{ mentor.short_bio }}</p>
          <div class="row">
            <div class="col-md-6">
              <p><strong>Experience:</strong> {{ mentor.years_experience }} years</p>
              <p><strong>Industry:</strong> {{ mentor.industry }}</p>
            </div>
            <div class="col-md-6">
              <p><strong>Business Stage Expertise:</strong> {{ mentor.business_stage_expertise|title }}</p>
              <p><strong>Focus Areas:</strong> {{ mentor.key_focus_areas }}</p>
            </div>
          </div>
          <hr>
          <h5>Contact</h5>
          <p class="mb-1"><i class="fas fa-envelope me-2"></i>{{ mentor.email }}</p>
          {% if mentor.phone %}<p class="mb-0"><i class="fas fa-phone me-2"></i>{{ mentor.phone }}</p>{% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
